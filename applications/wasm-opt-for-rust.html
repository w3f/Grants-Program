<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-applications/wasm-opt-for-rust" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">wasm-opt for Rust | Web3 Foundation Grants</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://grants.web3.foundation/applications/wasm-opt-for-rust"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="wasm-opt for Rust | Web3 Foundation Grants"><meta data-rh="true" name="description" content="- Team Name: Common Orbit LLC"><meta data-rh="true" property="og:description" content="- Team Name: Common Orbit LLC"><link data-rh="true" rel="icon" href="/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://grants.web3.foundation/applications/wasm-opt-for-rust"><link data-rh="true" rel="alternate" href="https://grants.web3.foundation/applications/wasm-opt-for-rust" hreflang="en"><link data-rh="true" rel="alternate" href="https://grants.web3.foundation/applications/wasm-opt-for-rust" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9VKKGZO0U1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Web3 Foundation Grants" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f3a7e75f.css">
<script src="/assets/js/runtime~main.785706f9.js" defer="defer"></script>
<script src="/assets/js/main.f737dd4d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#000;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a target="_blank" rel="noopener noreferrer" href="https://medium.com/web3foundation/web3-foundation-ecodev-wave-26-7f145c39c2ef">Our blog post on Ecosystem Development Wave 26 is now online!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/w3f_logo.svg" alt="W3F Grants Program" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/w3f_logo.svg" alt="W3F Grants Program" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Grants Program</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/applications">List of Grants</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs/Process/how-to-apply">Apply</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><code>wasm-opt</code> for Rust</h1></header>
<ul>
<li><strong>Team Name:</strong> Common Orbit LLC</li>
<li><strong>Payment Address:</strong> (Ethereum DAI) 0x2de31E52E24Df0588C64B27657D4F75e5462adEf</li>
<li><strong><a href="https://github.com/w3f/Grants-Program/tree/master#level_slider-levels" target="_blank" rel="noopener noreferrer">Level</a>:</strong> 2</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-overview-page_facing_up">Project Overview <!-- -->ðŸ“„<a href="#project-overview-page_facing_up" class="hash-link" aria-label="Direct link to project-overview-page_facing_up" title="Direct link to project-overview-page_facing_up">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3>
<p>This project makes the <a href="https://rustwasm.github.io/book/reference/tools.html#wasm-opt--a-hrefhttpsgithubcomwebassemblybinaryenrepositorya" target="_blank" rel="noopener noreferrer"><code>wasm-opt</code></a> tool more accessible to Rust programmers.
<code>wasm-opt</code> is a <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WebAssembly</a> optimizer and is required by most software toolchains that
produce WebAssembly binaries.</p>
<p>This project is to package <code>wasm-opt</code> as a cargo crate,
so that it can be installed by typing</p>
<blockquote>
<p><code>cargo install wasm-opt</code></p>
</blockquote>
<p>Additionally, it will provide a Rust API so that toolchain developers may,
if they desire, call <code>wasm-opt</code> programmatically,
so that their users are not required to manually install the tool.</p>
<p><code>wasm-opt</code> is a part of the <a href="https://github.com/WebAssembly/binaryen" target="_blank" rel="noopener noreferrer">binaryen</a> toolset, written in C++.
It is almost universally required by all toolchains that compile to WebAssembly.
It is required by Parity&#x27;s <a href="https://github.com/paritytech/cargo-contract" target="_blank" rel="noopener noreferrer"><code>cargo-contract</code></a> tool for <a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer">ink!</a> development.</p>
<p><strong>This tool can not be aquired in the way Rust programmers expect â€” with <code>cargo install</code>.</strong>
Installation of the tool is system-dependent.
Many system package managers have some version of it,
in some cases an old version;
or it can be downloaded in binary form for most platforms, from GitHub,
in which case it has to be extracted and added to the environment <code>PATH</code> variable in an ad-hoc way.</p>
<p>In <a href="#appendix-the-wasm-opt-installation-experience">our personal experience</a>, aquiring this tool was a minor, but needless, barrier, to programming with <a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer">ink!</a>.</p>
<p>In the course of this grant <code>cargo-contract</code> will receive pull requests
to optionally enable both the following:</p>
<ol>
<li>recommend installation via <code>cargo install wasm-opt</code></li>
<li>use <code>wasm-opt</code> via API and not require installation.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-details">Project Details<a href="#project-details" class="hash-link" aria-label="Direct link to Project Details" title="Direct link to Project Details">â€‹</a></h3>
<p>Note that although <code>wasm-opt</code> comes from the binaryen suite of tools,
this project is only focused on <code>wasm-opt</code>.
All other binaryen tools are out of scope.
If this project is successful and there is demand,
future work can extend the technique to the rest of binaryen.</p>
<p>This project is technically straightforward.
The main complication is that within <code>cargo</code> it is not possible to install binaries that were not produced
directly by the Rust compiler.
This means that it is not possible to simply build <code>wasm-opt</code> in a build script, then have <code>cargo</code> install it.</p>
<p>This is the basic approach we will take, for the executable:</p>
<ul>
<li>a <code>wasm-opt-sys</code> crate builds the C++ code for <code>wasm-opt</code></li>
<li>the C++ source is built with only the C++ compiler all Rust users will have installed,
no CMake or other build-system dependency</li>
<li>the C++ <code>wasm-opt</code> source is minimally-patched to export its <code>main</code> function with C ABI to be called from Rust</li>
<li>a <code>wasm-opt</code> crate contains a tiny Rust module that calls the C <code>wasm-opt</code> main function</li>
</ul>
<p>We have prototyped the project sufficiently to believe the described approach will succeed.</p>
<p>For the library bindings:</p>
<ul>
<li><code>wasm-opt-sys</code> will export low-level Rust bindings with the help of one
of the common C++-integration crates, likely <code>cxx</code></li>
<li><code>wasm-opt</code> will provide an idiomatic Rust wrapper that exposes the necessary <code>wasm-opt</code> options programmatically</li>
</ul>
<p>We will also deliver the following:</p>
<ul>
<li>Full README and API documentation</li>
<li>Basic regression tests for the binary and library</li>
<li>CI for the platforms<!-- -->
<ul>
<li><code>aarch64-apple-darwin</code></li>
<li><code>aarch64-unknown-linux-gnu</code></li>
<li><code>i686-pc-windows-msvc</code></li>
<li><code>i686-unknown-linux-gnu</code></li>
<li><code>x86_64-apple-darwin</code></li>
<li><code>x86_64-pc-windows-msvc</code></li>
<li><code>x86_64-unknown-linux-gnu</code></li>
</ul>
</li>
<li>Pull requests adding optional support for the <code>wasm-opt</code> crate to<!-- -->
<ul>
<li><code>cargo-contract</code>, the ink! build tool</li>
</ul>
</li>
<li>One blog post about the tool and its development, at <a href="https://brson.github.io" target="_blank" rel="noopener noreferrer">https://brson.github.io</a></li>
</ul>
<p>We will not include the following <code>wasm-opt</code> capabilities in the library bindings:</p>
<ul>
<li>Fuzzing. <code>wasm-opt</code> has multiple options related to fuzz testing the output
module. We are aware of no potential clients for this feature. Including these
fuzzing features requires code duplication in Rust, for additional maintenance
burden and questionable benefit.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem-fit">Ecosystem Fit<a href="#ecosystem-fit" class="hash-link" aria-label="Direct link to Ecosystem Fit" title="Direct link to Ecosystem Fit">â€‹</a></h3>
<p>This project is immediately useful to all Rust developers that build for wasm.</p>
<p>It is more specifically useful to developers of Rust-based toolchains that target wasm,
and most specifically the <code>cargo-contract</code> tool used to compile ink! programs.
It is probably relevant to authors of Substrate runtimes as well,
though we do not have that experience yet.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prior-work-and-alternatives">Prior Work and Alternatives<a href="#prior-work-and-alternatives" class="hash-link" aria-label="Direct link to Prior Work and Alternatives" title="Direct link to Prior Work and Alternatives">â€‹</a></h4>
<p>There are existing <a href="https://github.com/pepyakin/binaryen-rs" target="_blank" rel="noopener noreferrer">Rust bindings for binaryen</a>.
As-is they don&#x27;t provide a route to installing <code>wasm-opt</code> via cargo.
It is unclear if they provide the APIs needed to expose <code>wasm-opt</code> programmatically,
though they probably do.
These bindings appear to rely on CMake to build.
We do not expect to use them directly, but may reference them during development.</p>
<p>The <a href="https://github.com/bytecodealliance/cargo-wasi" target="_blank" rel="noopener noreferrer"><code>cargo-wasi</code></a> tool takes a <a href="https://bytecodealliance.github.io/cargo-wasi/wasm-opt.html#which-wasm-opt-executed" target="_blank" rel="noopener noreferrer">different strategy</a> to acquiring <code>wasm-opt</code>.
It automatically downloads the <code>wasm-opt</code> binary, presumably from the official releases.
Other wasm toolchains like <code>cargo-contract</code> could follow a similar strategy,
possibly by extracting the existing logic from <code>cargo-wasi</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="team-busts_in_silhouette">Team <!-- -->ðŸ‘¥<a href="#team-busts_in_silhouette" class="hash-link" aria-label="Direct link to team-busts_in_silhouette" title="Direct link to team-busts_in_silhouette">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-members">Team members<a href="#team-members" class="hash-link" aria-label="Direct link to Team members" title="Direct link to Team members">â€‹</a></h3>
<ul>
<li><strong>Team lead:</strong> <a href="https://github.com/brson" target="_blank" rel="noopener noreferrer">Brian Anderson</a></li>
<li><strong>Team member:</strong> <a href="https://github.com/aimeedeer" target="_blank" rel="noopener noreferrer">Aimee Zhu</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="contact">Contact<a href="#contact" class="hash-link" aria-label="Direct link to Contact" title="Direct link to Contact">â€‹</a></h3>
<ul>
<li><strong>Contact Name:</strong> Brian Anderson</li>
<li><strong>Contact Email:</strong> <a href="mailto:andersrb@gmail.com" target="_blank" rel="noopener noreferrer">andersrb@gmail.com</a></li>
<li><strong>Website:</strong> <a href="https://brson.github.io" target="_blank" rel="noopener noreferrer">https://brson.github.io</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="legal-structure">Legal Structure<a href="#legal-structure" class="hash-link" aria-label="Direct link to Legal Structure" title="Direct link to Legal Structure">â€‹</a></h3>
<ul>
<li><strong>Registered Address:</strong> 16192 Coastal Highway, Lewes, Delaware 19958</li>
<li><strong>Registered Legal Entity:</strong> Common Orbit LLC</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="teams-experience">Team&#x27;s experience<a href="#teams-experience" class="hash-link" aria-label="Direct link to Team&#x27;s experience" title="Direct link to Team&#x27;s experience">â€‹</a></h3>
<p>The team lead is one of the original authors of the Rust programming language,
with 12 years of Rust experience.
They have performed Rust work for Mozilla, Reddit, PingCAP, Solana, MobileCoin, Parity, and Nervos.
Both team members are maintainers of the <a href="https://rustinblockchain.org/" target="_blank" rel="noopener noreferrer">Rust in Blockchain</a> newsletter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-code-repos">Team Code Repos<a href="#team-code-repos" class="hash-link" aria-label="Direct link to Team Code Repos" title="Direct link to Team Code Repos">â€‹</a></h3>
<ul>
<li><a href="https://github.com/brson/wasm-opt-rs" target="_blank" rel="noopener noreferrer">https://github.com/brson/wasm-opt-rs</a></li>
<li><a href="https://github.com/brson" target="_blank" rel="noopener noreferrer">https://github.com/brson</a></li>
<li><a href="https://github.com/aimeedeer" target="_blank" rel="noopener noreferrer">https://github.com/aimeedeer</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-linkedin-profiles-if-available">Team LinkedIn Profiles (if available)<a href="#team-linkedin-profiles-if-available" class="hash-link" aria-label="Direct link to Team LinkedIn Profiles (if available)" title="Direct link to Team LinkedIn Profiles (if available)">â€‹</a></h3>
<p>N/A</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-status-open_book">Development Status <!-- -->ðŸ“–<a href="#development-status-open_book" class="hash-link" aria-label="Direct link to development-status-open_book" title="Direct link to development-status-open_book">â€‹</a></h2>
<p><a href="https://github.com/brson/wasm-opt-rs" target="_blank" rel="noopener noreferrer">https://github.com/brson/wasm-opt-rs</a></p>
<p>We have created the initial project layout and investigated the feasibility of building the binaryen codebase using only the <a href="https://docs.rs/cc/latest/cc/" target="_blank" rel="noopener noreferrer"><code>cc</code></a> crate,
as well as the feasibility of trivially calling the <code>wasm-opt</code> <code>main</code> function from Rust as described.</p>
<p>We have reserved the <code>wasm-opt</code> and <code>wasm-opt-sys</code> crate names on crates.io.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-roadmap-nut_and_bolt">Development Roadmap <!-- -->ðŸ”©<a href="#development-roadmap-nut_and_bolt" class="hash-link" aria-label="Direct link to development-roadmap-nut_and_bolt" title="Direct link to development-roadmap-nut_and_bolt">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3>
<ul>
<li><strong>Total Estimated Duration:</strong> 3-4 months</li>
<li><strong>Full-Time Equivalent (FTE):</strong>  0.4</li>
<li><strong>Total Costs:</strong> 30,000 USD</li>
</ul>
<p>This will be a part time effort.
I have divided this into two logical milestones,
though in reality the work will overlap.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-1--proof-of-concept">Milestone 1 â€” Proof of Concept<a href="#milestone-1--proof-of-concept" class="hash-link" aria-label="Direct link to Milestone 1 â€” Proof of Concept" title="Direct link to Milestone 1 â€” Proof of Concept">â€‹</a></h3>
<ul>
<li><strong>Estimated duration:</strong> 1-2 month</li>
<li><strong>FTE:</strong>  0.4</li>
<li><strong>Costs:</strong> 15,000 USD</li>
</ul>
<p>During this phase we will prove the concept and produce a <code>wasm-opt</code> Rust binary and API.</p>
<table><thead><tr><th style="text-align:right">Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td style="text-align:right">0a.</td><td>License</td><td>MIT / Apache-2.0</td></tr><tr><td style="text-align:right">0b.</td><td>Documentation</td><td>Basic README.</td></tr><tr><td style="text-align:right">0c.</td><td>Testing Guide</td><td>Manual smoke testing on Linux, Windows, and MacOS, x86_64 and ARM.</td></tr><tr><td style="text-align:right">0d.</td><td>Docker</td><td>Docker is not required for this project.</td></tr><tr><td style="text-align:right">1.</td><td><code>wasm-opt</code> binary</td><td>Produce a <code>wasm-opt</code> binary that can be built by cargo but is otherwise identical to stock <code>wasm-opt</code>.</td></tr><tr><td style="text-align:right">2.</td><td>APIs</td><td>Write an idiomatic, but possibly incomplete, Rust API for loading wasm, optimizing it, and writing it again.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-2--integration">Milestone 2 â€” Integration<a href="#milestone-2--integration" class="hash-link" aria-label="Direct link to Milestone 2 â€” Integration" title="Direct link to Milestone 2 â€” Integration">â€‹</a></h3>
<ul>
<li><strong>Estimated duration:</strong> 1-2 month</li>
<li><strong>FTE:</strong>  0.4</li>
<li><strong>Costs:</strong> 15,000 USD</li>
</ul>
<p>During this phase we will prepare the project for production and integrate it with <code>cargo-contract</code>.</p>
<table><thead><tr><th style="text-align:right">Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td style="text-align:right">0a.</td><td>License</td><td>MIT / Apache-2.0</td></tr><tr><td style="text-align:right">0b.</td><td>Documentation</td><td>Full README and API docs.</td></tr><tr><td style="text-align:right">0c.</td><td>Testing Guide</td><td>Basic integration tests for both binary and library.</td></tr><tr><td style="text-align:right">0d.</td><td>Docker</td><td>Docker is not required for this project.</td></tr><tr><td style="text-align:right">0e.</td><td>Article</td><td>Publish a technical blog post about how the project was developed and indicating it is available for use.</td></tr><tr><td style="text-align:right">1.</td><td>APIs</td><td>Ensure the APIs expose all the <code>wasm-opt</code> options, and can be easily integrated into tools like <code>cargo-contract</code>.</td></tr><tr><td style="text-align:right">2.</td><td><code>cargo-contract</code> integration</td><td>Submit a PR to <code>cargo-contract</code> that integrates the <code>wasm-opt</code> crate.</td></tr><tr><td style="text-align:right">3.</td><td>CI</td><td>Set up CI for all indicated platforms.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plans">Future Plans<a href="#future-plans" class="hash-link" aria-label="Direct link to Future Plans" title="Direct link to Future Plans">â€‹</a></h2>
<p>Upon completion of this project we will pursue a maintainence grant
to supply hourly funds for maintenance of this project.
We expect maintenance to be minimal,
primarily updating the code and making new releases to match upstream binaryen releases,
and responding to issue reports.</p>
<p>We are interested in pursuing a pure-Rust alternative to <code>wasm-opt</code> with a limited
focus of quickly shrinking wasm binaries.</p>
<p>We expect to pursue additional projects related to ink! and Substrate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-the-wasm-opt-installation-experience">Appendix: The <code>wasm-opt</code> installation experience<a href="#appendix-the-wasm-opt-installation-experience" class="hash-link" aria-label="Direct link to appendix-the-wasm-opt-installation-experience" title="Direct link to appendix-the-wasm-opt-installation-experience">â€‹</a></h2>
<p>Upon calling <code>cargo-contract build</code> without <code>wasm-opt</code> installed
the build errors with this long explanation:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: wasm-opt not found! Make sure the binary is in your PATH environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We use this tool to optimize the size of your contract&#x27;s Wasm binary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasm-opt is part of the binaryen package. You can find detailed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">installation instructions on https://github.com/WebAssembly/binaryen#tools.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There are ready-to-install packages for many platforms:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Debian/Ubuntu: apt-get install binaryen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Homebrew: brew install binaryen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Arch Linux: pacman -S binaryen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Windows: binary releases at https://github.com/WebAssembly/binaryen/releases</span><br></span></code></pre></div></div>
<p>Despite the effort to explain how to install this tool,
following the instructions on our system resulted in an old version of <code>wasm-opt</code>
and <code>cargo-contract</code> produced a new error:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: Your wasm-opt version is 91, but we require a version &gt;= 99.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If you tried installing from your system package manager the best</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">way forward is to download a recent binary release directly:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://github.com/WebAssembly/binaryen/releases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Make sure that the `wasm-opt` file from that release is in your `PATH`.</span><br></span></code></pre></div></div>
<p>This actually did about the best that could be expected to help us
get set up, and we did end up downloading the binary tarball,
extracting it, and modifying our path.
But the experience could be better.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/w3f/Grants-Program/edit/master/applications/wasm-opt-for-rust.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-overview-page_facing_up" class="table-of-contents__link toc-highlight">Project Overview ðŸ“„</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#project-details" class="table-of-contents__link toc-highlight">Project Details</a></li><li><a href="#ecosystem-fit" class="table-of-contents__link toc-highlight">Ecosystem Fit</a></li></ul></li><li><a href="#team-busts_in_silhouette" class="table-of-contents__link toc-highlight">Team ðŸ‘¥</a><ul><li><a href="#team-members" class="table-of-contents__link toc-highlight">Team members</a></li><li><a href="#contact" class="table-of-contents__link toc-highlight">Contact</a></li><li><a href="#legal-structure" class="table-of-contents__link toc-highlight">Legal Structure</a></li><li><a href="#teams-experience" class="table-of-contents__link toc-highlight">Team&#39;s experience</a></li><li><a href="#team-code-repos" class="table-of-contents__link toc-highlight">Team Code Repos</a></li><li><a href="#team-linkedin-profiles-if-available" class="table-of-contents__link toc-highlight">Team LinkedIn Profiles (if available)</a></li></ul></li><li><a href="#development-status-open_book" class="table-of-contents__link toc-highlight">Development Status ðŸ“–</a></li><li><a href="#development-roadmap-nut_and_bolt" class="table-of-contents__link toc-highlight">Development Roadmap ðŸ”©</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#milestone-1--proof-of-concept" class="table-of-contents__link toc-highlight">Milestone 1 â€” Proof of Concept</a></li><li><a href="#milestone-2--integration" class="table-of-contents__link toc-highlight">Milestone 2 â€” Integration</a></li></ul></li><li><a href="#future-plans" class="table-of-contents__link toc-highlight">Future Plans</a></li><li><a href="#appendix-the-wasm-opt-installation-experience" class="table-of-contents__link toc-highlight">Appendix: The <code>wasm-opt</code> installation experience</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/Grants-Program" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Support Docs/privacy_policy">Privacy Policy</a></li><li class="footer__item"><a href="https://web3.foundation/legal-disclosures/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legal Disclosures</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/!XpynPDLusWUWfDpaqr:matrix.org?via=web3.foundation&amp;via=matrix.org&amp;via=matrix.parity.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants Community Matrix Channel<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2025 Web3 Foundation</div></div></div></footer></div>
</body>
</html>