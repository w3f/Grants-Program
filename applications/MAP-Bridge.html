<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-applications/MAP-Bridge">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Map Bridge | Web3 Foundation Grants</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://w3f.github.io/Grants-Program/applications/MAP-Bridge"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Map Bridge | Web3 Foundation Grants"><meta data-rh="true" name="description" content="Proposer:*  zcheng9"><meta data-rh="true" property="og:description" content="Proposer:*  zcheng9"><link data-rh="true" rel="icon" href="/Grants-Program/img/Web3Foundation.png"><link data-rh="true" rel="canonical" href="https://w3f.github.io/Grants-Program/applications/MAP-Bridge"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/MAP-Bridge" hreflang="en"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/MAP-Bridge" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9VKKGZO0U1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Web3 Foundation Grants" href="/Grants-Program/opensearch.xml"><link rel="stylesheet" href="/Grants-Program/assets/css/styles.e66379ce.css">
<link rel="preload" href="/Grants-Program/assets/js/runtime~main.aed5d884.js" as="script">
<link rel="preload" href="/Grants-Program/assets/js/main.846a0761.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#000;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Check out <a target="_blank" rel="noopener noreferrer" href="https://web3.bamboohr.com/jobs/">our current job openings</a>!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Grants-Program/"><div class="navbar__logo"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">W3F Grants Program</b></a><a class="navbar__item navbar__link" href="/Grants-Program/introduction">Introduction</a><a class="navbar__item navbar__link" href="/Grants-Program/applications">List of Grants</a><a class="navbar__item navbar__link" href="/Grants-Program/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Grants-Program/Process/how-to-apply">Apply</a><a class="navbar__item navbar__link" href="/Grants-Program/contribute">Contribute</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Map Bridge</h1><ul><li><strong>Proposer:</strong>  zcheng9</li><li><strong>Payment Address:</strong> 1CFM6QDvxwXEV3dUN9x2ftqq4rwAfkxN9W</li><li><strong>Status:</strong> <a href="https://github.com/w3f/Grant-Milestone-Delivery/pull/89#issuecomment-792968983" target="_blank" rel="noopener noreferrer">Terminated</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-overview-">Project Overview ðŸ“„<a class="hash-link" href="#project-overview-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">â€‹</a></h3><p>This project deliver a bridge  relay  to connect Polkadot and other PoW chains(Ethereum specific in this proposal). The bridge  relay can provide an non-interactive, succinct proof of POW  of a bridged chain based on ULVP (ultra-light verification protocol) .  And based on such proof,  it can further verify  inner state of certain account or transaction inclusion proof.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-description">Project Description<a class="hash-link" href="#project-description" title="Direct link to heading">â€‹</a></h3><ul><li>MAP-Bridge would implement a new data structure called merkle mountain range(MMR) which contain the information of  all confirmed block headers. And the root of MMR would be include in the new mined block somewhere.</li><li>In order to achieve this, we have to include the most recently MMR root in the new mined blocks in both Ethereum and Map bridge(parachain in Polkadot). For MAP bridge we can simply include it in the block header. For Ethereum, we have three possible way: firstly we could propose a EIP to ensure  block header of Ethereum including MMR root; secondly we could deployed a contract in Ethereum to maintain most recent MMR root; and the last choice is to use CHT root in Ethereum instead of MMR root to do the verification work. In our proposal, we prefer to use the second method. </li><li>MAP-Bridge is build on a verification module called Ultra-Light Verification Protocol (ULVP). ULVP origins from the paper <a href="https://eprint.iacr.org/2019/226.pdf" target="_blank" rel="noopener noreferrer">&quot;Flyclient:  Super-Light Clients for Cryptocurrencies&quot;</a>.  Any node could verify the existence of any transaction or the balance of any account with very limited data through ULVP compare to SPV. </li><li>The verification mechanism is as following:</li><li>The verifier connects some randomly selected full node in the destiny chain (at least one of these must be honest) and request them sending their tail blocks and corresponding proofs. Then the verifier validates the proof with the longest tail block. If it is a valid proof, the verifier would select this tail block as his choice and save it for next step. Otherwise he would drop this full node  and check the second-longest tail block. The verifier continues this steps until it finds the tail block with valid proof. Based on our assumption, he connects at least one honest prover. Thus this algorithm would eventually find the honest longest tail block.</li><li>The verifier connects some other randomly selected full node in the destiny chain and obtains  the block header in specified height and the corresponding MMR branch proof of this header upon to the most recent MMR. The verifier has the root of the most recent MMR which include in the tail block header. He could then validate the MMR branch proof based on it. If he get the valid block header he can save it for next step, otherwise keep doing it for another full node.</li><li>This step is similar to SPV.  The verifier connects some other randomly selected full node in the destiny chain.  The he could request  them sending the detail of the transaction in specified height with the merkle branch proof up to the transaction root in block header( for state of any account is similar since the state root is stored in the header too). After that he could check the validity of the merkle proof. If the check passed, he could be sure that this transaction is indeed included in the destiny chain. If not, he could try another full node. If none of them could provide valid proof, he would know this transaction is not included in the destiny chain yet. </li><li>More details of ULVP could be found <a href="https://medium.com/marcopolo-protocol/marcopolo-protocol-sub-protocol-ultra-light-verification-protocol-ulvp-adc73eccf566" target="_blank" rel="noopener noreferrer">Here</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem-fit">Ecosystem Fit<a class="hash-link" href="#ecosystem-fit" title="Direct link to heading">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="team-">Team ðŸ‘¥<a class="hash-link" href="#team-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-members">Team members<a class="hash-link" href="#team-members" title="Direct link to heading">â€‹</a></h3><ul><li>Chan</li><li>Seabook</li><li>LYU.L</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-website">Team Website<a class="hash-link" href="#team-website" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://www.maplabs.io/" target="_blank" rel="noopener noreferrer">https://www.maplabs.io/</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="legal-structure">Legal Structure<a class="hash-link" href="#legal-structure" title="Direct link to heading">â€‹</a></h3><p>MAP labs</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="teams-experience">Team&#x27;s experience<a class="hash-link" href="#teams-experience" title="Direct link to heading">â€‹</a></h3><ul><li>Dr. Chan received the Ph.D. degree in applied mathematics from Illinois Institute of Technology, Illinois, USA in 2017. His research interests include consensus algorithms, P2P protocol, cryptography, blockchain interoperbility.</li><li>Dr. Seabook is  based in Australia and get his Blockchain PhD. from Australian Deakin University. He has more than 15 years of professional software design, architecture and development experiences. He has worked as Chief Technology Officer and Senior Architect in Telstra, Accenture, Qantas, eBay and Citibank.</li><li>LYU.L holds a master degree from Tsinghua University and also a member of China national blockchain and distributed ledger committee. He has more than 13 years of experience inlarge-scale computing and algorithm, with many patents such as consensus algorithm and blockchain transaction.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-code-repos">Team Code Repos<a class="hash-link" href="#team-code-repos" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://github.com/Philasande-map/mapbridge" target="_blank" rel="noopener noreferrer">https://github.com/Philasande-map/mapbridge</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-roadmap-">Development Roadmap ðŸ”©<a class="hash-link" href="#development-roadmap-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a class="hash-link" href="#overview-1" title="Direct link to heading">â€‹</a></h3><ul><li><strong>Total Estimated Duration:</strong> 3 month</li><li><strong>Full-time equivalent (FTE):</strong> 3</li><li><strong>Total Costs:</strong> $ 2 BTC.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-1-implement-substrate-mmr-module">Milestone 1 Implement Substrate MMR Module<a class="hash-link" href="#milestone-1-implement-substrate-mmr-module" title="Direct link to heading">â€‹</a></h3><ul><li><strong>Estimated Duration:</strong>1 month</li><li><strong>FTE:</strong>  3</li><li><strong>Costs:</strong> 1 BTC
In this milestone, we will build Substrate-based MMR for MAP bridge and also provide the MMR proof generating and verifying method in runtime module . This is a preliminary for ULVP module which can verify the validity of tail block of a certain blockchain carry heaviest proof of work.  Furthermore, we will implement  the block header storage functionality. This would make the blockchain  could  manage the MMRï¼ˆsuch as appending new blocks into blockchain and retrieving the MMR based on the MMR root  in a certain block header, etc. ï¼‰. We will provide proper unit-test for this milestone.</li></ul><table><thead><tr><th>Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td>0a.</td><td>License</td><td>Apache 2.0</td></tr><tr><td>0b.</td><td>Testing</td><td>This milestone will have unit-test for MMR trie, MMR proof runtime api and MMR manager. In the guide we will describe how to run these tests.</td></tr><tr><td>1.</td><td>MMR Trie Structure</td><td>We will implement this MMR Trie based on the exist Library. We will fork this <a href="https://github.com/tari-project/tari/tree/development/base_layer/mmr" target="_blank" rel="noopener noreferrer">Repo</a> and realize all the functionality we need based on that. Including customlized field in MMR node, customlized merging method and MMR manager.</td></tr><tr><td>2.</td><td>Substrae MMR proof runtime module</td><td>Deliver MMR proof verification in substrate SRML runtime and provide the ability to generate and manage MMR.</td></tr><tr><td>3.</td><td>AppendBlock</td><td>Append the current block as leaf node into MMR. Method signature:  Public bool Appendblock(Header blockheader)</td></tr><tr><td>4.</td><td>RetrieveMMR</td><td>Retrieve the MMR based on the root provide.   Method signature: Public *MMR RetrieveMMR(Hash root)</td></tr><tr><td>5.</td><td>GenerateProof</td><td>Generate the merkle branch proof in MMR. Method signature: Public <em>Proof GenerateProof(</em>MMR mmr, Leafnode leaf)</td></tr><tr><td>6.</td><td>VerifyProofByRoot</td><td>Verify if the proof is consistent with root. Method signature: Public bool VerifyBlockByRoot(Hash root, *Proof proof)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-2-integrate-ulvp-module-into-substrate">Milestone 2 Integrate ULVP module into substrate<a class="hash-link" href="#milestone-2-integrate-ulvp-module-into-substrate" title="Direct link to heading">â€‹</a></h3><ul><li><strong>Estimated Duration:</strong> 2 month</li><li><strong>FTE:</strong>  3</li><li><strong>Costs:</strong> $1BTC
In this milestone, we will further implement the ULVP module and some add-on module. This would involving generating and verifying succinct proof,  specifying the cross-chain transaction, implementing the cross-chain transaction pool, building P2P network based on libp2p. Once this milestone is accomplished, the whole feature of ULVP module is complete and could be used to verify inner state of certain account or transaction inclusion proof for other blockchain. We will include proper test and documentation for this milestone</li></ul><table><thead><tr><th>Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td>0a.</td><td>License</td><td>Apache 2.0</td></tr><tr><td>0b.</td><td>Documentation</td><td>We will provide both inline documentation of the code and a basic tutorial that explains how a user can import the protocol.</td></tr><tr><td>0c.</td><td>Testing Guide</td><td>This milestone will have unit-test for ULVP module to ensure functionality. In the guide we will describe how to run these tests.</td></tr><tr><td>1.</td><td>ULVP module</td><td>Implement ULVP module to retrieve the transaction or state from another blockchain. We will realize all the three verification steps we mention above using the Substrate MMR module we finished in milestone 1.</td></tr><tr><td>2.</td><td>P2P Relay Substrate module</td><td>Implement P2P Relay Substrate module which provide the functionality which could discover ethereum nodes and connect any ethereum node if the peer manager is not full. Once the connection has established, it use gossip to broadcast MAP parachain block announcement and cross chain transactions to ethereum, and receive message from ethereum. which contains ethereum block announcement, cross transactions, MMR Proof and Receipt Proof.</td></tr><tr><td>3.</td><td>Cross-chain asset transfer demo</td><td>Realized a demo to enable token transfer between Polkadot parachain(MAP bridge) and Ethereum testnet. This need first deployed a contract in Ethereum testnet which maintain the MMR root of Ethereum. Next we need to deployed a mint contract in bridge parachain and a lock contract in Ethereum. If user lock some token in Ethereum to the lock contract, any node in the bridge parachain could verify this lock transaction. And the mint contract would mint the token in parachain if the lock transaction is indeed confirmed in Ethereum testnet.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plans">Future Plans<a class="hash-link" href="#future-plans" title="Direct link to heading">â€‹</a></h2><p>We plan to extend our bridge to most POW and POS type blockchains in the future. Through our bridge we could link more and more other blockchain systems into Polkadot Ecosystem .</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-overview-" class="table-of-contents__link toc-highlight">Project Overview ðŸ“„</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#project-description" class="table-of-contents__link toc-highlight">Project Description</a></li><li><a href="#ecosystem-fit" class="table-of-contents__link toc-highlight">Ecosystem Fit</a></li></ul></li><li><a href="#team-" class="table-of-contents__link toc-highlight">Team ðŸ‘¥</a><ul><li><a href="#team-members" class="table-of-contents__link toc-highlight">Team members</a></li><li><a href="#team-website" class="table-of-contents__link toc-highlight">Team Website</a></li><li><a href="#legal-structure" class="table-of-contents__link toc-highlight">Legal Structure</a></li><li><a href="#teams-experience" class="table-of-contents__link toc-highlight">Team&#39;s experience</a></li><li><a href="#team-code-repos" class="table-of-contents__link toc-highlight">Team Code Repos</a></li></ul></li><li><a href="#development-roadmap-" class="table-of-contents__link toc-highlight">Development Roadmap ðŸ”©</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#milestone-1-implement-substrate-mmr-module" class="table-of-contents__link toc-highlight">Milestone 1 Implement Substrate MMR Module</a></li><li><a href="#milestone-2-integrate-ulvp-module-into-substrate" class="table-of-contents__link toc-highlight">Milestone 2 Integrate ULVP module into substrate</a></li></ul></li><li><a href="#future-plans" class="table-of-contents__link toc-highlight">Future Plans</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/Grants-Program" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/Grants-Program/applications/Support Docs/privacy_policy">Privacy Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/!XpynPDLusWUWfDpaqr:matrix.org?via=web3.foundation&amp;via=matrix.org&amp;via=matrix.parity.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants Community Matrix Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2023 Web3 Foundation</div></div></div></footer></div>
<script src="/Grants-Program/assets/js/runtime~main.aed5d884.js"></script>
<script src="/Grants-Program/assets/js/main.846a0761.js"></script>
</body>
</html>