<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-applications/polkashots">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">polkashots.io | Web3 Foundation Grants</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://w3f.github.io/Grants-Program/applications/polkashots"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="polkashots.io | Web3 Foundation Grants"><meta data-rh="true" name="description" content="Proposer:* Nicolas Ochem"><meta data-rh="true" property="og:description" content="Proposer:* Nicolas Ochem"><link data-rh="true" rel="icon" href="/Grants-Program/img/Web3Foundation.png"><link data-rh="true" rel="canonical" href="https://w3f.github.io/Grants-Program/applications/polkashots"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/polkashots" hreflang="en"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/polkashots" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9VKKGZO0U1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Web3 Foundation Grants" href="/Grants-Program/opensearch.xml"><link rel="stylesheet" href="/Grants-Program/assets/css/styles.e66379ce.css">
<link rel="preload" href="/Grants-Program/assets/js/runtime~main.7fa4dd37.js" as="script">
<link rel="preload" href="/Grants-Program/assets/js/main.e910e2a0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#000;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Check out <a target="_blank" rel="noopener noreferrer" href="https://web3.bamboohr.com/jobs/">our current job openings</a>!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Grants-Program/"><div class="navbar__logo"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">W3F Grants Program</b></a><a class="navbar__item navbar__link" href="/Grants-Program/introduction">Introduction</a><a class="navbar__item navbar__link" href="/Grants-Program/applications">List of Grants</a><a class="navbar__item navbar__link" href="/Grants-Program/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Grants-Program/Process/how-to-apply">Apply</a><a class="navbar__item navbar__link" href="/Grants-Program/contribute">Contribute</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>polkashots.io</h1><ul><li><strong>Proposer:</strong> Nicolas Ochem</li><li><strong>Payment Address:</strong> bc1qu45ws52gkjgmwgu8gmqh2ejkcf4clt93jnnvsm</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-overview-">Project Overview ðŸ“„<a class="hash-link" href="#project-overview-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">â€‹</a></h3><p>Implement, release and maintain a snapshot website for Polkadot and Kusama.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-details">Project Details<a class="hash-link" href="#project-details" title="Direct link to heading">â€‹</a></h3><p>Substrate has an <code>--export-chain</code> and <code>--import-chain</code> feature to allow node operators to sync faster.</p><p>This is a key feature to be able to recover quickly in case of node failure. This results in decreased downtime, which is beneficial for the ecosystem.</p><p>This work will consist of an open source project, and a production website.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="polkadot-snapshot-generator">polkadot-snapshot-generator<a class="hash-link" href="#polkadot-snapshot-generator" title="Direct link to heading">â€‹</a></h4><p>The open-source project, <code>polkadot-snapshot-generator</code>, will consist of:</p><ul><li>infrastructure code for running a Polkadot node (or Kusama, or any substrate node) on Kubernetes on a cloud platform, deployed with Terraform</li><li>code to take filesystem-level snapshot of a live chain, then run <code>export-chain</code> command</li><li>mechanism to upload the snapshot to a storage bucket and publish a website with the most recent snapshot</li><li>a master cronjob, the <code>snapshot engine</code>, that triggers snapshot creation on a schedule</li></ul><p>There will be 2 kind of generated snapshots: RocksDB and Parity DB, until RocksDB becomes deprecated.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="polkashotsio-1">polkashots.io<a class="hash-link" href="#polkashotsio-1" title="Direct link to heading">â€‹</a></h4><p>We will also deploy and maintain <a href="https://polkashots.io" target="_blank" rel="noopener noreferrer">https://polkashots.io</a>, a website hosted on Cloud Infrastructure which will make snapshots available for free for community members.</p><p>The snapshot generation frequency will be configurable. 24 hours frequency seems reasonable. Nodes typically sync very fast from a 24 hour lag.</p><p>Snapshots will be stored on a public Google cloud storage bucket. We will be providing Polkadot and Kusama snapshots.</p><p>The snapshots will be clearly identified by block height and block hash. Hyperlinks will be provided to the main indexing websites (Polkascan, Polkastats) so the user can verify that the snapshot they are downloading is indeed the legitimate Polkadot chain.</p><p>Additionally, the snapshots will be hashed and a signature will be published on the polkashots.io website.</p><p>There will be static links (such as <a href="https://polkashots.io/dot/rocksdb" target="_blank" rel="noopener noreferrer">https://polkashots.io/dot/rocksdb</a>) that always point to a recent snapshot, which should simplify setup of an automated recovery mechanism.</p><p>We will modify our own existing projects, <a href="https://github.com/midl-dev/polkadot-k8s" target="_blank" rel="noopener noreferrer">polkadot-k8s</a> and <a href="https://github.com/midl-dev/polkadot-k8s-aux" target="_blank" rel="noopener noreferrer">polkadot-k8s-aux</a>. We will configure the default behaviour when spinning up a new chain to download snapshots automatically from the polkashots website.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem-fit">Ecosystem Fit<a class="hash-link" href="#ecosystem-fit" title="Direct link to heading">â€‹</a></h3><p>To my knowledge, there is no other active snapshot website for Polkadot/Kusama.</p><p><a href="https://dotleap.com/how-to-import-a-pre-synced-kusama-database/" target="_blank" rel="noopener noreferrer">This page</a> appears to be no longer updated.</p><p>People on Riot Validator Lounges regularly ask for fresh snapshots.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="team-">Team ðŸ‘¥<a class="hash-link" href="#team-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-members">Team members<a class="hash-link" href="#team-members" title="Direct link to heading">â€‹</a></h3><ul><li>Nicolas Ochem</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-website">Team Website<a class="hash-link" href="#team-website" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://MIDL.dev" target="_blank" rel="noopener noreferrer">https://MIDL.dev</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="legal-structure">Legal Structure<a class="hash-link" href="#legal-structure" title="Direct link to heading">â€‹</a></h3><p>MIDLDEV OU (incorporated in Estonia).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="teams-experience">Team&#x27;s experience<a class="hash-link" href="#teams-experience" title="Direct link to heading">â€‹</a></h3><p>We are a blockchain SaaS infrastructure company and this project is in line with the range of services that we offer. We can deliver a solid codebase and a website that will be dependable, fast and relevant.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-code-repos">Team Code Repos<a class="hash-link" href="#team-code-repos" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://github.com/midl-dev" target="_blank" rel="noopener noreferrer">https://github.com/midl-dev</a></li><li><a href="https://github.com/nicolasochem" target="_blank" rel="noopener noreferrer">https://github.com/nicolasochem</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-linkedin-profiles">Team LinkedIn Profiles<a class="hash-link" href="#team-linkedin-profiles" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://www.linkedin.com/in/nicolasochem/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/nicolasochem/</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-roadmap-">Development Roadmap ðŸ”©<a class="hash-link" href="#development-roadmap-" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a class="hash-link" href="#overview-1" title="Direct link to heading">â€‹</a></h3><ul><li><strong>Total Estimated Duration:</strong> One month</li><li><strong>Full-time equivalent (FTE):</strong>  0.5</li><li><strong>Total Costs:</strong> 1 BTC</li></ul><p>Note: the cost will cover the initial development as well as the costs related to hosting the website and snapshots for some time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-1">Milestone 1<a class="hash-link" href="#milestone-1" title="Direct link to heading">â€‹</a></h3><ul><li><strong>Estimated Duration:</strong> 1 month</li><li><strong>FTE:</strong>  0.5</li><li><strong>Costs:</strong> 1 BTC</li></ul><table><thead><tr><th>Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td>0a.</td><td>License</td><td>Apache 2.0</td></tr><tr><td>0b.</td><td>Documentation</td><td>The code will be easy to deploy, taking only a few utilities and one single command. The entire cycle - from spinup to teardown - will be clearly explained in the README</td></tr><tr><td>0c.</td><td>Tutorial</td><td>We will be posting a follow-up on <a href="https://medium.com/better-programming/a-polkadot-validator-on-kubernetes-3e694cb43841" target="_blank" rel="noopener noreferrer">our post about deploying a Polkadot validator on Kubernetes</a> to explain how to use snapshots to deploy a validator.</td></tr><tr><td>1.</td><td>Terraform</td><td>A Terraform manifest to deploy all cloud resources in a simple way.</td></tr><tr><td>2.</td><td>Docker</td><td>A set of Docker container descriptions (Dockerfiles and scripts) that are used to manage the snapshot website</td></tr><tr><td>3.</td><td>Kubernetes</td><td>A Kubernetes manifest, built with Kustomize, to deploy the containers and cronjobs for snapshot creation</td></tr><tr><td>4.</td><td>Testing</td><td>While infrastructure code is not a natural candidate for testing due to its heavy reliance on external components, we will be providing a script to parse terraform, dockerfile and kubernetes codebase and check for consistency</td></tr><tr><td>5.</td><td>Live website</td><td>Deploy polkashots.io with recently updated snapshots</td></tr></tbody></table><p>The open-source project will have three directories, <code>terraform</code>, <code>k8s</code> and <code>docker</code>. Their contents are described below.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="terraform">Terraform<a class="hash-link" href="#terraform" title="Direct link to heading">â€‹</a></h5><p>The terraform module takes parameters such as <code>chain_name</code>, <code>billing_account</code>... as input, and uses the <a href="https://www.terraform.io/docs/providers/google/index.html" target="_blank" rel="noopener noreferrer">Terraform GCP provider</a>. It creates a Google Cloud Project and a Kubernetes cluster.</p><p>Inside the cluster, it deploys a configurable number of Kubernetes namespaces as described below.</p><p>It also configures <a href="https://cloud.google.com/cloud-build" target="_blank" rel="noopener noreferrer">Google Cloud Build</a> to automatically build the containers needed to run the snapshotting jobs, and push them to the cluster.</p><p>The entire setup can be destroyed with <code>terraform destroy</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">â€‹</a></h5><p>A Kubernetes Deployment runs a Polkadot or Kusama node in a Pod with a Persistent Volume for storage.</p><p>This node can optionally be brought up from a snapshot itself (in case the snapshot engine itself needs to be recreated).</p><p>It is not possible to do <code>export-chain</code> on a running node, therefore it is necessary to leverage some cloud filesystem snapshotting capabilities.</p><p>A Kubernetes Cron Job triggers a pod with special privileges that in turns triggers the following Kubernetes actions:</p><ul><li>take a <a href="https://kubernetes.io/docs/concepts/storage/volume-snapshots/" target="_blank" rel="noopener noreferrer">Persistent Volume Snapshot</a> of the Polkadot node storage</li><li>create a persistent volume from the snapshot</li><li>triggers a Kubernetes job called &quot;snapshotter&quot; which:<ul><li>mounts the persistent volume created from snapshot</li><li>runs the <code>export-chain</code> command against it</li><li>compresses, hashes the snapshot, then uploads it to a bucket</li><li>builds a Jekyll static website from source and pushes it to Firebase, with relevant metadata of the generated snapshot</li></ul></li><li>tears down all objects created above</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a class="hash-link" href="#docker" title="Direct link to heading">â€‹</a></h4><p>A series of custom-build containers built for performing the actions described in the previous section, namely:</p><ul><li>snapshot-importer: imports a snapshot when initially kicking off the setup</li><li>snapshot-engine: the job that sends kubernetes control plane commands to generate a filesystem-level snapshot</li><li>snapshotter: the job that performs <code>export-chain</code> and pushes it to a bucket</li><li>website-builder: the job that builds the Jekyll static site</li></ul><p>The Dockerfiles and associated scripts to build the containers listed above will be shipped as part of the project.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="community-engagement">Community engagement<a class="hash-link" href="#community-engagement" title="Direct link to heading">â€‹</a></h3><p>We will be announcing the website and the project on Medium.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plans">Future Plans<a class="hash-link" href="#future-plans" title="Direct link to heading">â€‹</a></h2><p>We may be extending offers to various Substrate chains to have their snapshots hosted on our platform.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-information-">Additional Information âž•<a class="hash-link" href="#additional-information-" title="Direct link to heading">â€‹</a></h2><p>Earlier we received a grant from the Tezos foundation, part of the purpose was to develop a <a href="https://github.com/midl-dev/tezos-snapshot-generator" target="_blank" rel="noopener noreferrer">similar snapshotting project</a> for the Tezos blockchain.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-overview-" class="table-of-contents__link toc-highlight">Project Overview ðŸ“„</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#project-details" class="table-of-contents__link toc-highlight">Project Details</a></li><li><a href="#ecosystem-fit" class="table-of-contents__link toc-highlight">Ecosystem Fit</a></li></ul></li><li><a href="#team-" class="table-of-contents__link toc-highlight">Team ðŸ‘¥</a><ul><li><a href="#team-members" class="table-of-contents__link toc-highlight">Team members</a></li><li><a href="#team-website" class="table-of-contents__link toc-highlight">Team Website</a></li><li><a href="#legal-structure" class="table-of-contents__link toc-highlight">Legal Structure</a></li><li><a href="#teams-experience" class="table-of-contents__link toc-highlight">Team&#39;s experience</a></li><li><a href="#team-code-repos" class="table-of-contents__link toc-highlight">Team Code Repos</a></li><li><a href="#team-linkedin-profiles" class="table-of-contents__link toc-highlight">Team LinkedIn Profiles</a></li></ul></li><li><a href="#development-roadmap-" class="table-of-contents__link toc-highlight">Development Roadmap ðŸ”©</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#milestone-1" class="table-of-contents__link toc-highlight">Milestone 1</a></li><li><a href="#community-engagement" class="table-of-contents__link toc-highlight">Community engagement</a></li></ul></li><li><a href="#future-plans" class="table-of-contents__link toc-highlight">Future Plans</a></li><li><a href="#additional-information-" class="table-of-contents__link toc-highlight">Additional Information âž•</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/Grants-Program" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/Grants-Program/applications/Support Docs/privacy_policy">Privacy Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/!XpynPDLusWUWfDpaqr:matrix.org?via=web3.foundation&amp;via=matrix.org&amp;via=matrix.parity.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants Community Matrix Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2023 Web3 Foundation</div></div></div></footer></div>
<script src="/Grants-Program/assets/js/runtime~main.7fa4dd37.js"></script>
<script src="/Grants-Program/assets/js/main.e910e2a0.js"></script>
</body>
</html>