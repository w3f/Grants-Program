<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-applications/Subsembly-GRANDPA">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Subsembly - Support for GRANDPA | Web3 Foundation Grants</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://w3f.github.io/Grants-Program/applications/Subsembly-GRANDPA"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Subsembly - Support for GRANDPA | Web3 Foundation Grants"><meta data-rh="true" name="description" content="Team Name:* LimeChain"><meta data-rh="true" property="og:description" content="Team Name:* LimeChain"><link data-rh="true" rel="icon" href="/Grants-Program/img/Web3Foundation.png"><link data-rh="true" rel="canonical" href="https://w3f.github.io/Grants-Program/applications/Subsembly-GRANDPA"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/Subsembly-GRANDPA" hreflang="en"><link data-rh="true" rel="alternate" href="https://w3f.github.io/Grants-Program/applications/Subsembly-GRANDPA" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9VKKGZO0U1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Web3 Foundation Grants" href="/Grants-Program/opensearch.xml"><link rel="stylesheet" href="/Grants-Program/assets/css/styles.d8e07fe7.css">
<link rel="preload" href="/Grants-Program/assets/js/runtime~main.d2f7c331.js" as="script">
<link rel="preload" href="/Grants-Program/assets/js/main.3bfd9d72.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#000;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Check out <a target="_blank" rel="noopener noreferrer" href="https://web3.bamboohr.com/jobs/">our current job openings</a>!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Grants-Program/"><div class="navbar__logo"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Grants-Program/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">W3F Grants Program</b></a><a class="navbar__item navbar__link" href="/Grants-Program/introduction">Introduction</a><a class="navbar__item navbar__link" href="/Grants-Program/applications">List of Grants</a><a class="navbar__item navbar__link" href="/Grants-Program/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Grants-Program/Process/how-to-apply">Apply</a><a class="navbar__item navbar__link" href="/Grants-Program/contribute">Contribute</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Subsembly - Support for GRANDPA</h1><ul><li><strong>Team Name:</strong> <a href="https://github.com/LimeChain" target="_blank" rel="noopener noreferrer">LimeChain</a></li><li><strong>Payment Address:</strong> <code>0x6eDf76FD16Bb290A544fDc14fBB4b403D1DEeD9f</code> (USDT)</li><li><strong>Status:</strong> <a href="https://github.com/w3f/Grants-Program/pull/563#issuecomment-1404941967" target="_blank" rel="noopener noreferrer">Terminated</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-overview-">Project Overview ðŸ“„<a href="#project-overview-" class="hash-link" aria-label="Direct link to Project Overview ðŸ“„" title="Direct link to Project Overview ðŸ“„">â€‹</a></h2><p>LimeChain&#x27;s team has worked on <a href="https://github.com/w3f/General-Grants-Program/blob/master/grants/rfp-responses/subsembly-assemblyscript_runtime_framework.md" target="_blank" rel="noopener noreferrer">Subsembly - Framework for building AssemblyScript Runtimes</a> and managed to deliver 4/6 milestones so far. Developers can already checkout/install the <a href="https://github.com/LimeChain/subsembly" target="_blank" rel="noopener noreferrer">Subsembly CLI</a> and implement Substrate Runtimes using the framework.</p><p>The original goal of Subsembly was to support Aura and BABE consensus algorithms and provide the GRANDPA finality gadget. However, implementing GRANDPA and BABE turned out a harder task than initially estimated/scoped as a result the only consensus algorithm supported is Aura.
We would like to propose a grant amendment that enables LimeChain to continue Subsembly&#x27;s development, finish the 2 outstanding milestones and propose additional features to be included.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>In this project we are scoping out the development of GRANDPA and laying down the foundations for the future support of BABE.
For detailed information on GRANDPA, please refer to the original <a href="https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf" target="_blank" rel="noopener noreferrer">whitepaper</a> and the <a href="https://github.com/w3f/polkadot-spec/releases" target="_blank" rel="noopener noreferrer">Polkadot Host spec file</a>.</p><p>Generally speaking, the GRANDPA work can be divided into 3 components:</p><p>1) Implementing the Runtime APIs
2) Having support for the Runtime-to-Consensus Engine Messages
3) Implementing required modules/pallets (session, offences)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-details">Project Details<a href="#project-details" class="hash-link" aria-label="Direct link to Project Details" title="Direct link to Project Details">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-apis">Runtime APIs<a href="#runtime-apis" class="hash-link" aria-label="Direct link to Runtime APIs" title="Direct link to Runtime APIs">â€‹</a></h4><p>Subsembly must implement the following Runtime APIs to have full support for GRANDPA:</p><ul><li><code>GrandpaApi_grandpa_authorities</code> - fetches the list of GRANDPA authorities according to the genesis block. Any future authority changes get tracked via Runtime-to-consensus engine messages</li><li><code>GrandpaApi_submit_report_equivocation_unsigned_extrinsic</code> - Called by the Host when validator votes for multiple blocks during one voting subround</li><li><code>GrandpaApi_generate_key_ownership_proof</code> - Generates proof of the membership of a key owner in a specified block state. The returned values are used to report equivocations</li><li><code>GrandpaApi_grandpa_pending_change</code> - Returns information about GRANDPA pending changes</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-to-consensus-engine-messages">Runtime-to-Consensus Engine Messages<a href="#runtime-to-consensus-engine-messages" class="hash-link" aria-label="Direct link to Runtime-to-Consensus Engine Messages" title="Direct link to Runtime-to-Consensus Engine Messages">â€‹</a></h4><p>GRANDPA utilises consensus digest items for various events. The following is a list of the digest items emitted related to GRANDPA:
<img loading="lazy" src="https://user-images.githubusercontent.com/12232750/128009365-e5943a13-f115-4c88-8205-e67c23920748.png" alt="Untitled (20)" class="img_ev3q"></p><p><strong>Scheduled Change &amp; Forced Change</strong></p><p>Every pallet/module has an <code>on_finalize</code> hook that is called whenever a block is finalised. In the case of GRANDPA, once the <code>on_finalize</code> is called, the Runtime must check whether there is a <code>PendingChange</code> (forced or scheduled) that must be deposited. If there is - a new <code>DigestItem</code> of type <code>Consensus</code> with the <code>GRANDPA_ENGINE_ID</code> must be added in the block.</p><p><strong>On Disabled</strong></p><p>The ConsensusLog is deposited once the Session module calls the on_disabled method. The GRANDPA module must simply deposit the log whenever it is called from the Session module.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="public-functions">Public Functions<a href="#public-functions" class="hash-link" aria-label="Direct link to Public Functions" title="Direct link to Public Functions">â€‹</a></h4><p>The following public functions, eligible for calling from the client side are:</p><ul><li><code>report_equivocation</code> - must be a signed extrinsic</li><li><code>report_equivocation_unsigned</code> - this extrinsic may not be signed. It is called by the block producer</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies--prerequisites">Dependencies &amp; Prerequisites<a href="#dependencies--prerequisites" class="hash-link" aria-label="Direct link to Dependencies &amp; Prerequisites" title="Direct link to Dependencies &amp; Prerequisites">â€‹</a></h4><p>It is important to note that GRANDPA relies on the Session, Offence and minimal Staking modules. The Session module is configured to have a certain range of blocks and every time <code>on_initialize</code> is called, the module checks whether the <code>session</code> should end. If it has to end, the module <code>rotates</code> the session changing the validators.</p><p>The offences module tracks reported offences and the Staking module must provide the implementation of the offence - slashing the users for their misbehaviour.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem-fit">Ecosystem Fit<a href="#ecosystem-fit" class="hash-link" aria-label="Direct link to Ecosystem Fit" title="Direct link to Ecosystem Fit">â€‹</a></h3><p>Subsembly provides an alternative way for developers to build Runtimes. More specifically, it enables developers with TypeScript/JavaScript knowledge to build on top of the Substrate ecosystem.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="team-">Team ðŸ‘¥<a href="#team-" class="hash-link" aria-label="Direct link to Team ðŸ‘¥" title="Direct link to Team ðŸ‘¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-members">Team members<a href="#team-members" class="hash-link" aria-label="Direct link to Team members" title="Direct link to Team members">â€‹</a></h3><ul><li>Daniel Ivanov</li><li>Dastanbek Samatov</li><li>Martin Petkov</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contact">Contact<a href="#contact" class="hash-link" aria-label="Direct link to Contact" title="Direct link to Contact">â€‹</a></h3><ul><li><strong>Contact Name:</strong> Daniel Ivanov</li><li><strong>Contact Email:</strong> <a href="mailto:daniel@limechain.tech" target="_blank" rel="noopener noreferrer">daniel@limechain.tech</a></li><li><strong>Website:</strong> <a href="https://limechain.tech" target="_blank" rel="noopener noreferrer">https://limechain.tech</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="legal-structure">Legal Structure<a href="#legal-structure" class="hash-link" aria-label="Direct link to Legal Structure" title="Direct link to Legal Structure">â€‹</a></h3><ul><li><strong>Registered Address:</strong> Bulgaria, Dragan Tsankov 23A, 1113, Sofia, Bulgaria</li><li><strong>Registered Legal Entity:</strong> LimeLabs Ltd.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="teams-experience">Team&#x27;s experience<a href="#teams-experience" class="hash-link" aria-label="Direct link to Team&#x27;s experience" title="Direct link to Team&#x27;s experience">â€‹</a></h3><p>LimeChain is a blockchain development company with 100+ completed projects and strong focus on blockchain development infrastructure. LimeChain has built tools for different protocols and networks such as Ethereum, The Graph, Polkadot, EOS, Aeternity and Corda. Some of the projects LimeChain has worked with are Celo, P&amp;G, Universe.xyz, The Graph, Dapper Labs, Hedera and Maker among others. LimeChain is also embedded into the Polkadot developer ecosystem, particularly with building AssemblyScript developer tools. The team has built a SCALE Codec implementation, Account-based AssemblyScript Runtime PoC and the Subsembly framework.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-code-repos">Team Code Repos<a href="#team-code-repos" class="hash-link" aria-label="Direct link to Team Code Repos" title="Direct link to Team Code Repos">â€‹</a></h3><p>LimeChain&#x27;s Substrate related repositories:</p><ul><li><a href="https://github.com/LimeChain/subsembly" target="_blank" rel="noopener noreferrer">https://github.com/LimeChain/subsembly</a></li><li><a href="https://github.com/LimeChain/subsembly-core" target="_blank" rel="noopener noreferrer">https://github.com/LimeChain/subsembly-core</a></li><li><a href="https://github.com/LimeChain/as-scale-codec" target="_blank" rel="noopener noreferrer">https://github.com/LimeChain/as-scale-codec</a></li><li><a href="https://github.com/LimeChain/as-substrate-runtime" target="_blank" rel="noopener noreferrer">https://github.com/LimeChain/as-substrate-runtime</a></li></ul><p>Team&#x27;s GitHub profiles:</p><ul><li><a href="https://github.com/LimeChain" target="_blank" rel="noopener noreferrer">https://github.com/LimeChain</a></li><li><a href="https://github.com/Daniel-K-Ivanov" target="_blank" rel="noopener noreferrer">https://github.com/Daniel-K-Ivanov</a></li><li><a href="https://github.com/dastanbeksamatov" target="_blank" rel="noopener noreferrer">https://github.com/dastanbeksamatov</a></li><li><a href="https://github.com/themartto" target="_blank" rel="noopener noreferrer">https://github.com/themartto</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team-linkedin-profiles-if-available">Team LinkedIn Profiles (if available)<a href="#team-linkedin-profiles-if-available" class="hash-link" aria-label="Direct link to Team LinkedIn Profiles (if available)" title="Direct link to Team LinkedIn Profiles (if available)">â€‹</a></h3><ul><li><a href="https://www.linkedin.com/in/daniel-k-ivanov/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/daniel-k-ivanov/</a></li><li><a href="https://www.linkedin.com/in/dastanbek-samatov-30ab71128/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/dastanbek-samatov-30ab71128/</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-status-">Development Status ðŸ“–<a href="#development-status-" class="hash-link" aria-label="Direct link to Development Status ðŸ“–" title="Direct link to Development Status ðŸ“–">â€‹</a></h2><p>The team already spend time on implementing GRANDPA, by updating the Subsembly CLI and spec builder to support GRANDPA authorities configuration. <a href="https://github.com/LimeChain/subsembly/blob/main/cli/src/commands/spec/builder/src/modules/grandpa.js" target="_blank" rel="noopener noreferrer">Reference</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-roadmap-">Development Roadmap ðŸ”©<a href="#development-roadmap-" class="hash-link" aria-label="Direct link to Development Roadmap ðŸ”©" title="Direct link to Development Roadmap ðŸ”©">â€‹</a></h2><p>Described below is a practical approach to the implementation of the GRANDPA module along with the the other auxiliary modules that are required.</p><ol><li>Session<ol><li>Implement session period configuration (<code>n</code> number of blocks)</li><li>Implement an <code>on_initialize</code> hook called when the block is initialized. It must check whether the session must end; if it ends, <code>rotate_session</code> is called.</li><li>Implement a service for tracking the Historical changes of session keys in order to verify proofs</li><li>Implement <code>rotate_session</code></li></ol></li><li>GRANDPA - Session<ol><li>Implement <code>on_new_session</code> handler</li><li>Implement <code>schedule_change</code></li><li>Implement <code>on_finalize</code> hook<ol><li>Pending changes added in the state from <code>schedule_change</code> must be deposited as logs.</li></ol></li></ol></li><li>Session<ol><li>Implement <code>set_keys</code> method. The extrinsic must be signed. The caller gets their provided <code>keys</code> set into storage for eventual usage in the next sessions</li><li>Implement <code>purge_keys</code> method. Removes the session keys of the function caller. Takes effect after the next session starts</li></ol></li><li>GRANDPA - Consensus Messages<ol><li>Add <code>on_finalize</code> hook - If the current block is X, pending scheduled authority changes for the same block must be executed and an event must be deposited</li></ol></li></ol><p>At this point, the following features should be supported by the module:</p><ul><li>Setting/changing/removing keys through the Session module</li><li>Rotating sessions on every <code>n</code> blocks</li><li>Changing authorities if required on session rotation</li><li>Depositing <code>Scheduled Change</code>, <code>Forced Change</code> and <code>Disable</code> consensus logs</li></ul><p>The last part is to add support for <code>equivocations</code>.</p><ol start="5"><li>Equivocations - Reporting voter misbehaviour. The reporting of equivocations results in offences and slashe<ol><li>Implement a service for verifying the <code>equivocation_proofs</code> - verifying the offender keys against the proof</li><li>Implement a method for verifying the equivocation proof by making sure that both votes target different blocks and the signatures are valid</li><li>Implement Reporting Service for offences that reward the sender</li><li>Implement Offences module that tracks offences</li><li>Implement minimal Staking module that provides an implementation for slashing <code>on_offence</code> as <code>OffenceHandler</code></li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><ul><li><strong>Total Estimated Duration:</strong> 69 working days</li><li><strong>Full-Time Equivalent (FTE):</strong>  1.5</li><li><strong>Total Costs:</strong> $45,540</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-1--session">Milestone 1 â€” Session<a href="#milestone-1--session" class="hash-link" aria-label="Direct link to Milestone 1 â€” Session" title="Direct link to Milestone 1 â€” Session">â€‹</a></h3><ul><li><strong>Estimated duration:</strong> 28 working days</li><li><strong>FTE:</strong>  1.5</li><li><strong>Costs:</strong> $18,480</li></ul><table><thead><tr><th align="right">Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td align="right">0a.</td><td>License</td><td>Apache 2.0 license</td></tr><tr><td align="right">0b.</td><td>Documentation</td><td>We will provide both <strong>inline documentation</strong> of the module as-well as update the official <a href="https://subsembly.gitbook.io/subsembly/" target="_blank" rel="noopener noreferrer">documentation</a> of Subsembly.</td></tr><tr><td align="right">0c.</td><td>Testing Guide</td><td>Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well - how one can set keys, purge them and verify that the session rotates.</td></tr><tr><td align="right">0d.</td><td>Docker</td><td>We will provide a Dockerfile(s) that can be used to test the functionality delivered with this milestone.</td></tr><tr><td align="right">1.</td><td>Session <code>period</code></td><td>We will start the work on Subsembly <code>session</code> module. The end-users will be able to configure the session period configuration through the module. The period will be represented in <code>n</code> number of blocks.</td></tr><tr><td align="right">2.</td><td><code>on_initialize</code> hook</td><td>We will extend the <code>on_initialize</code> hook to be calling the session&#x27;s <code>on_initialize</code> logic.</td></tr><tr><td align="right">3.</td><td>Historical session service</td><td>We will implement a Historical session service for storing new sessions, starting sessions and ending sessions. The service will have a mechanism for proving that a given validator was part of a session at a given index.</td></tr><tr><td align="right">4.</td><td><code>rotate_session</code></td><td>We will implement the logic for rotating the session in the context of GRANDPA.</td></tr><tr><td align="right">5.</td><td>Session <code>set_keys</code> extrinsic</td><td>We will implement the <code>set_keys</code> extrinsic. The extrinsic must be signed. The caller gets the provided <code>keys</code> set in to the sotrage for the eventual usage in next the sessions</td></tr><tr><td align="right">6.</td><td>Session <code>purge_keys</code> extrinsic</td><td>We will implement the <code>purge_keys</code> extrinsic. Removes the session keys of the function caller. Takes effect after the next session starts.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-2-grandpa-i">Milestone 2 GRANDPA I<a href="#milestone-2-grandpa-i" class="hash-link" aria-label="Direct link to Milestone 2 GRANDPA I" title="Direct link to Milestone 2 GRANDPA I">â€‹</a></h3><ul><li><strong>Estimated Duration:</strong> 19 working days</li><li><strong>FTE:</strong>  1.5</li><li><strong>Costs:</strong> $12,540</li></ul><table><thead><tr><th align="right">Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td align="right">0a.</td><td>License</td><td>Apache 2.0 license</td></tr><tr><td align="right">0b.</td><td>Documentation</td><td>We will provide both <strong>inline documentation</strong> of the module as-well as update the official <a href="https://subsembly.gitbook.io/subsembly/" target="_blank" rel="noopener noreferrer">documentation</a> of Subsembly.</td></tr><tr><td align="right">0c.</td><td>Testing Guide</td><td>Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well -  how someone can verify that sessions are being changed, as-well as verify that consensus logs are being deposited.</td></tr><tr><td align="right">0d.</td><td>Docker</td><td>We will provide a Dockerfile(s) that can be used to test the functionality delivered with this milestone.</td></tr><tr><td align="right">1.</td><td><code>on_new_session</code> hook</td><td>We will create a new GRANDPA module that will implement the <code>on_new_session</code> handler.</td></tr><tr><td align="right">2.</td><td><code>schedule_change</code></td><td>We will implement the <code>schedule_change</code> logic that adds a Pending Change into the state.</td></tr><tr><td align="right">3.</td><td><code>on_finalize</code> hook</td><td>We will implement the <code>on_finalize</code> hook that will be called once a block is finalized and will check whether there are pending changes that must be set deposited as consensus logs.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="milestone-3-grandpa-ii---equivocations">Milestone 3 GRANDPA II - Equivocations<a href="#milestone-3-grandpa-ii---equivocations" class="hash-link" aria-label="Direct link to Milestone 3 GRANDPA II - Equivocations" title="Direct link to Milestone 3 GRANDPA II - Equivocations">â€‹</a></h3><ul><li><strong>Estimated Duration:</strong> 22 working days</li><li><strong>FTE:</strong>  1.5</li><li><strong>Costs:</strong> $14,520</li></ul><table><thead><tr><th align="right">Number</th><th>Deliverable</th><th>Specification</th></tr></thead><tbody><tr><td align="right">0a.</td><td>License</td><td>Apache 2.0 license</td></tr><tr><td align="right">0b.</td><td>Documentation</td><td>We will provide both <strong>inline documentation</strong> of the module as-well as update the official <a href="https://subsembly.gitbook.io/subsembly/" target="_blank" rel="noopener noreferrer">documentation</a> of Subsembly.</td></tr><tr><td align="right">0c.</td><td>Testing Guide</td><td>Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well -  how someone can cause equivocation by a malicious node and verify that he is receiving a reward.</td></tr><tr><td align="right">0d.</td><td>Docker</td><td>We will provide a Dockerfile(s) that can be used to test all the functionality delivered with this milestone.</td></tr><tr><td align="right">0e.</td><td>Article</td><td>We will publish a <strong>guide</strong> in the Subsembly docs file, how one can run their Substrate node that uses Subsembly Runtime having GRANDPA enabled.</td></tr><tr><td align="right">1.</td><td>GRANDPA <code>equivocation_proofs</code> service</td><td>We will implement a services for verifying the <code>equivocation_proofs</code> - verifying the offender keys against the proof. Method for verifying the equivocation proof by making sure that both votes target different blocks and the signatures are valid.</td></tr><tr><td align="right">2.</td><td><code>reporting</code> service</td><td>We will implementa reporting service for offences that reward the sender.</td></tr><tr><td align="right">3.</td><td><code>offences</code> module</td><td>We will implement an <code>offences</code> module that tracks offences.</td></tr><tr><td align="right">3.</td><td>Minimal <code>staking</code> module</td><td>We will implement a minimal <code>staking</code> module that provides an implementation for slashing <code>on_offence</code> as <code>OffenceHandler</code></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plans">Future Plans<a href="#future-plans" class="hash-link" aria-label="Direct link to Future Plans" title="Direct link to Future Plans">â€‹</a></h2><p>LimeChain will be resolving any critical bugs that may arise. We would like to extend the framework by adding new pallets in the future. Our plan is to continue the development of the framework with support for BABE and after that, having support for Parachains. The end goal of Subsembly is to support the full set of foundational features that enable developers to create Substrate networks (with the option for both Aura and BABE + GRANDPA&#x27;s finality) as-well as Polkadot parathreads and parachains.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-information-">Additional Information âž•<a href="#additional-information-" class="hash-link" aria-label="Direct link to Additional Information âž•" title="Direct link to Additional Information âž•">â€‹</a></h2><p>LimeChain has been a long time contributor to the Substrate ecosystem mainly focused on developer tooling. Due to our involvement in the space we are working with various clients, developing smart contracts and working on parachains.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-overview-" class="table-of-contents__link toc-highlight">Project Overview ðŸ“„</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#project-details" class="table-of-contents__link toc-highlight">Project Details</a></li><li><a href="#ecosystem-fit" class="table-of-contents__link toc-highlight">Ecosystem Fit</a></li></ul></li><li><a href="#team-" class="table-of-contents__link toc-highlight">Team ðŸ‘¥</a><ul><li><a href="#team-members" class="table-of-contents__link toc-highlight">Team members</a></li><li><a href="#contact" class="table-of-contents__link toc-highlight">Contact</a></li><li><a href="#legal-structure" class="table-of-contents__link toc-highlight">Legal Structure</a></li><li><a href="#teams-experience" class="table-of-contents__link toc-highlight">Team&#39;s experience</a></li><li><a href="#team-code-repos" class="table-of-contents__link toc-highlight">Team Code Repos</a></li><li><a href="#team-linkedin-profiles-if-available" class="table-of-contents__link toc-highlight">Team LinkedIn Profiles (if available)</a></li></ul></li><li><a href="#development-status-" class="table-of-contents__link toc-highlight">Development Status ðŸ“–</a></li><li><a href="#development-roadmap-" class="table-of-contents__link toc-highlight">Development Roadmap ðŸ”©</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#milestone-1--session" class="table-of-contents__link toc-highlight">Milestone 1 â€” Session</a></li><li><a href="#milestone-2-grandpa-i" class="table-of-contents__link toc-highlight">Milestone 2 GRANDPA I</a></li><li><a href="#milestone-3-grandpa-ii---equivocations" class="table-of-contents__link toc-highlight">Milestone 3 GRANDPA II - Equivocations</a></li></ul></li><li><a href="#future-plans" class="table-of-contents__link toc-highlight">Future Plans</a></li><li><a href="#additional-information-" class="table-of-contents__link toc-highlight">Additional Information âž•</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/Grants-Program" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/Grants-Program/applications/Support Docs/privacy_policy">Privacy Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/!XpynPDLusWUWfDpaqr:matrix.org?via=web3.foundation&amp;via=matrix.org&amp;via=matrix.parity.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants Community Matrix Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2023 Web3 Foundation</div></div></div></footer></div>
<script src="/Grants-Program/assets/js/runtime~main.d2f7c331.js"></script>
<script src="/Grants-Program/assets/js/main.3bfd9d72.js"></script>
</body>
</html>